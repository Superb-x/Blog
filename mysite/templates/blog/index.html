{% extends 'base.html' %}

{% load blog_tags %}

{% block navigator %}
    <ul>
        <li><a href="{% url 'blog:index' %}" class="active">首页</a></li>
        <li><a href="{% url 'blog:archive_list' %}">归档</a></li>
        <li><a href="{% url 'blog:tag_list' %}">标签</a></li>
        <li><a href="#">分类</a></li>
        <li><a href="{% url 'blog:about' %}">关于</a></li>
    </ul>
{% endblock navigator %}

{% block main %}
<!-- Post -->
    {% if error_msg %}
    <p>{{error_msg}}</p>
    {% endif %}
    {% for post in post_list %}
    <article class="post">
        <header>
            <div class="title">
                <h2 title="{{post.title}}"><a href="{{post.get_absolute_url}}">{{post.title}}</a></h2>
                {{post.excerpt | safe}}
            </div>
            <div class="meta">
                <time class="published" datetime="2015-11-01">{{post.create_time}}</time>
                <a href="#" class="author"><span class="name">{{post.author}}</span><img
                        src="{{post.author.avatar.url}}" alt=""/></a>
            </div>
        </header>
        <!--如果当前文章有缩略图，就显示出来-->
        {% if post.thumb %}
            <a href="#" class="image featured"><img src="{{post.thumb.url}}" alt=""/></a>
        {% endif %}
        <footer>
            <ul class="actions">
                <li><a href="{{post.get_absolute_url}}" class="button big">继续阅读</a></li>
            </ul>
            <ul class="stats">
                <li><a href="#">{{post.category}}</a></li>
                <li><a href="#" class="icon fa-heart">0</a></li>
                <li><a href="#" id="sourceId::{{post.pk}}" class="icon fa-comment cy_cmt_count">0</a></li>
            </ul>
        </footer>
    </article>
    {% endfor %}


    {% if is_paginated %}
        <!-- Pagination -->
        <ul class="actions pagination">
            {% if first %}
                <li><a href="">1</a></li>
            {% endif %}
            {% if left %}
                {% if left_has_more %}
                    <li><a href="">...</a></li>
                {% endif %}
                {% for i in left %}
                    <li><a href="?page={{i}}">{{i}}</a></li>
                {% endfor %}
            {% endif %}
                <li><a href="?page={{page_obj.number}}" class="active">{{page_obj.number}}</a></li>
            {% if right %}
                {% for i in right %}
                    <li><a href="?page={{i}}">{{i}}</a></li>
                {% endfor %}
                {% if right_has_more %}
                    <li><a href="">···</a></li>
                {% endif %}
            {% endif %}
            {% if last %}
                    <li><a href="?page={{paginator.num_pages}}">{{paginator.num_pages}}</a></li>
            {% endif %}
        </ul>
    {% endif %}
{% endblock main %}

{% block intro %}
    {% get_user_profile as user_profile %}
    {% for user in user_profile %}
    <section id="intro">
        <a href="#" class="logo"><img src="{{user.avatar.url}}" alt=""/></a>
        <header>
            <h2>Superb-x</h2>
            <p>{{user.description}}</p>
        </header>
    </section>
    {% endfor %}
{% endblock intro %}